# $Id$
PortSystem		1.0

name			macathena-moira
version			20181023
distname		moira-${version}
categories		net
maintainers		mit.edu:sipb-macathena
description		Hesiod is the Project Athena service name resolution protocol
platforms		darwin
master_sites	http://macathena.mit.edu/dist/
patchfiles		patch-lib-Makefile.in

worksrcdir		moira-4

checksums           md5     aa1e70b18c723241d392318f1e93923d \
                    sha1    2d46e2a87825f160164a712ace9af3bf66bc1b99 \
                    rmd160  de7ef989d8d8b1be44bc436aa5174fe81c97e16f \
                    sha256  5589d19096725aaf0596e5d986324ce3a89cd9bcefe13c194d442796755cdf1e \
                    size    1607033

use_autoconf	yes

configure.args	--with-krb5 \
				--with-com_err \
				--with-hesiod


configure.env-append	TERM=vt100

post-destroot	{
	file rename ${destroot}${prefix}/bin/chfn \
		${destroot}${prefix}/bin/chfn.moira
	file rename ${destroot}${prefix}/bin/chsh \
		${destroot}${prefix}/bin/chsh.moira
	file rename ${destroot}${prefix}/share/man/man1/chfn.1 \
		${destroot}${prefix}/share/man/man1/chfn.moira.1
	file rename ${destroot}${prefix}/share/man/man1/chsh.1 \
		${destroot}${prefix}/share/man/man1/chsh.moira.1
}

depends_build		port:e2fsprogs

depends_lib		port:libhesiod \
				port:ncurses

destroot.violate_mtree	yes

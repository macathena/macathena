# $Id$
PortSystem		1.0

name			macathena-moira
version			20071203
distname		moira-${version}
categories		net
maintainers		mit.edu:sipb-macathena
description		Hesiod is the Project Athena service name resolution protocol
platforms		darwin
master_sites	http://macathena.mit.edu/dist/
patchfiles		patch-build-destdir \
				patch-configure.in \
				patch-config.sub \
				patch-config.guess
checksums		md5 eeb0b651e1689b56a2df030bdc61881c \
				sha1 945e277c3c974c1933f8efda80f95bc2f9537aef \
				rmd160 48f6b2b8696f8f73d335fa918c8d40f167413416

use_autoconf	yes

configure.args	--with-krb5 \
				--with-com_err \
				--with-hesiod \

configure.env-append	TERM=vt100

post-destroot	{
	file rename ${destroot}${prefix}/bin/chfn \
		${destroot}${prefix}/bin/chfn.moira
	file rename ${destroot}${prefix}/bin/chsh \
		${destroot}${prefix}/bin/chsh.moira
	file rename ${destroot}${prefix}/share/man/man1/chfn.1 \
		${destroot}${prefix}/share/man/man1/chfn.moira.1
	file rename ${destroot}${prefix}/share/man/man1/chsh.1 \
		${destroot}${prefix}/share/man/man1/chsh.moira.1
}

depends_lib		port:libhesiod \
				port:ncurses

destroot.violate_mtree	yes

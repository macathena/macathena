# $Id$
PortSystem		1.0

name			macathena-moira
version			20071203
distname		moira-${version}
categories		net
maintainers		mit.edu:broder
description		Hesiod is the Project Athena service name resolution protocol
platforms		darwin
master_sites	http://web.mit.edu/macathena/dist/
patchfiles		patch-build-destdir \
				patch-configure.in \
				patch-config.sub \
				patch-config.guess
checksums		md5 65b13cf2e4c861b8d873f45f501f7026 \
				sha1 4f0bfb56031ead91d08a0c77f0f128205bcf5c81 \
				rmd160 2db0bc8f8413ac9cf8c91aacb9d7f41f1507a100

use_autoconf	yes

configure.args	--with-krb5 \
				--with-com_err \
				--with-hesiod \

configure.env-append	TERM=vt100

post-destroot	{
	file rename ${destroot}${prefix}/bin/chfn \
		${destroot}${prefix}/bin/chfn.moira
	file rename ${destroot}${prefix}/bin/chsh \
		${destroot}${prefix}/bin/chsh.moira
	file rename ${destroot}${prefix}/share/man/man1/chfn.1 \
		${destroot}${prefix}/share/man/man1/chfn.moira.1
	file rename ${destroot}${prefix}/share/man/man1/chsh.1 \
		${destroot}${prefix}/share/man/man1/chsh.moira.1
}

depends_lib		port:libhesiod \
				port:ncurses

destroot.violate_mtree yes
